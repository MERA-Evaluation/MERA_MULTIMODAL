# Требования к датасетам задач MERA

Задачи в MERA делятся на приватные и публичные. Можно проводить оценку моделей на задачах обоих типов, но **рейтинг (лидерборд) формируется только на основе результатов на приватных задачах**. Предложить можно как приватную, так и публичную задачу — отличия будут только в формате хранения ответов (в случае приватных датасетов ответы никуда не выкладываются, а передаются организаторам напрямую для защищенного хранения).

| **Приватные датасеты**<br>(задачи рейтинга) | **Публичные датасеты**<br> (открытые задачи) |
| -- | -- |
| Cозданы с нуля с использованием оригинальных текстов и мультимодальных элементов. Материалы не опубликованы в сети и не запланированы к публикации. Ответы к вопросам хранятся в защищенном виде только у организаторов MERA. | Cобраны на основе открытых материалов, например, переведенных и адаптированных публичных датасетов для других языков. Датасеты вместе с ответами публикуются в открытом доступе. |
| Влияют на рейтинг модели. | Диагностическая оценка, не учитываются в рейтинге. |
| Результаты видны в основном рейтинге моделей. | Результате в отдельной таблице открытых задач. |
| Оценку можно получить только через сабмит ответов модели на сайте. | Оценку можно увидеть сразу после запуска скрипта оценки. |


## Базовые требования к задачам

Это базовый набор входных требований к датасету-кандидату на включение в MERA. Важно соблюдать их, чтобы бенчмарк дольше был актуален для современных моделей и был максимально защищен от утечек данных.

**Для приватных датасетов**:
- Никакие из используемых материалов не должны быть опубликованы в сети и/или запланированы к публикации.
- На предлагаемой задаче должны быть проведены замеры нескольких baseline-моделей соответствующей модальности; минимальная оценка среди них должна не превышать 0.8.

**Для всех датасетов**:
- Материалы, используемые в датасете, в том числе тексты и мультимодальные элементы, должны соответствовать правовым нормам на использование этих материалов. При использовании открытых данных нужно соблюдать требования оригинальных лицензий, а ссылку на саму лицензию размещать в [документации задачи](./dataset_formatting.md#метаданные-датасета-raw_dataset_metajson).
- Если для создания датасета использованы синтетические данные, обязательно должен быть указан их источник (в том числе генеративные модели).
- Минимальный объем датасета — 300 вопросов. Максимальный объем датасета определяется исходя из разнообразия представленных классов / доменов: на каждую такую категорию нужно от 100 до 1000 вопросов. В случае, если в датасете есть категории, но не по всем есть минимум 100 вопросов, датасет будет учитываться как единая задача, без разбивки по доменам / подзадачам.
- Датасет должен соответствовать [**критериям качества**](#критерии-качества-датасетов), на соответствие которым датасет будут проверять эксперты от команды организаторов MERA.


## Критерии качества датасетов

Создание датасета и теста для оценки модели — сложная и творческая задача. Мы не ограничиваем авторов в выборе постановки задачи и методологии создании данных (помимо указанных выше базовых требований). Тем не менее, предлагаем ряд критериев качества, которые могут указывать на явные проблемы с датасетом.

На результат ревью датасета во многом влияет подробно заполненная [документация датасета](./dataset_formatting.md#текстовые-описания-raw_readme_rumdи-raw_readme_enmd), которая помогает понять, какие методологические решения были приняты по тому или иному этапу разработки задачи.


### DS признаки (или вспоминаем основы ML)

- **Баланс классов!**
    -  Распределение ответов — будь это задача классификации или задания с открытым ответом, лейблы должны быть сбалансированы. В случае открытых ответов баланс можно проверить по внешним признакам: например, формат ответов или количество слов в нем.
    -  Если это multiple-choice задача, то важно проверять баланс вариантов ответов, чтобы не было преимущественно "C", или преимущественно "Нет", или преимущественно "2", в зависимости от формата ответа.

-  **Дубликаты** в полных примерах / парах вопрос-ответ / картинка-вопрос / картинка-ответ; повторы в том числе неявные (например, синонмичные вопросы или различающиеся несколькими символами), которые могут повлиять на результат и возможность "хакнуть" датасет.

- **Разнообразие содержимого**. Может относиться к доменам, классам ответов, разнообразию формулировок и типов вопросов. Суть “разнообразности” будет меняться от задачи к задаче, но вот примеры когда разнообразие не соблюдено:
    - В задаче на скобочные последовательности много примеров похожей длины, нет длинных и коротких;
    - В математических примерах много операций сложения и мало других арифметических операций;
    - В датасете с картинками много пейзажей и мало крупного плана или наоборот — это актуально в случае, если задача претендует на общедоменность (хотя можно вообразить себе задачу где нужны только пейзажи);
    - Большое количество одинаковых типов картинок (перекос в только сгенерированные, например искусственно, или в формат, например только таблиц/рисунков) – не подходит в случае общедоменного датасета, но может быть необходимо для узкой задачи.

- Не должно быть очевидной возможности автоматическими методами разметить ответы в датасете. Например, для текстового датасета с арифметическими вычислениями ответы получить очень легко. И по аналогии можно нагенерировать много похожих примеров, дообучиться на них.
        
- Не должно быть очевидной возможности автоматическими методами (то есть без ручной разметки) масштабировать примеры в датасете (и как следствие положить в обучение моделям).

- Задачу не должна решаться простым бейзлайном (в т.ч. обычной текстовой LLM / агентом / быстро вопроизводимым скриптом). Ответы не должны быть скоррелированы с какой-то фичей датасета (в том числе метаданными вопроса и картинки). Пример: в задаче на бинарную классификацию сэмплы с положительным ответом были чаще всего длиннее негативных, т.е. можно было хакнуть по длине вопроса просто


### Лицензия

- Лицензия должна быть обязательно указана в [метаданных датасета](./dataset_formatting.md#метаданные-датасета-raw_dataset_metajson). Она должна быть правильно отнаследована из публичных данных, из которых создавался датасет, и допускать именно такое переиспользование датасета/картинок/аудио/видео.
- Идеально подходит открытая лицензия на материалы. Проверить можно по источникам, на основе которых сделан датасет.


### Утечка данных

- Утечка данных: вопросов / картинок / аудио / видео — первый критерий для отнесения датасета к публичным, а не приватным. В приватных задачах не используются картинки/аудио/видео, которые опубликованы в Интернете.

- Сверять изображения и текст поиском в Интернете можно только для публичных сетов, для приватных — это потенциальная утечка данных в логи поисковых сервисов! То же самое касается пруфрида текстов/вопросов внешними сервисами или API моделями. Такие операции с данными нужно обязательно отражать в методологии создания датасета.

- В случае сгенерированных текстов / картинок / аудио / видео в метаданных вопроса должно помечено, какой моделью была проведена генерация.


###  Форматирование текста

- Тексты заданий и инструкций чистые, без опечаток, без типографских недочетов (двойные пробелы, оформление кавычек и тире).

- Должно быть единообразие формы ответов и вопросов. Убирать случаи: пробелы после ответов; дубляж ответа, просто его форма одинаковая, но точка или запятая затесалась, все эти вариации; капс, с большой или маленькой буквы написано; универсальная форма ответов (например, все в начальной форме с маленькой буквы).

- Учтена ли специфика русского языка при форматировании текстов? В русской традиции тире выделяется пробелами, а в американской — обычно не отделяют; то же с арзынми типами кавычек.


### Техническая проверка изображений

- Базовые проверки на открытие файла. Поддерживаемые разрешения изображений: PNG, JPEG/JPG.
— Отсутствие дубликатов картинок. В том числе если картинка не полностью дубликат, а вырезанная из оригинала.
— Проверка на запрещенный контент. Изображений 18+ быть не должно, если это не оправдано методологией задачи (например, в случае этических сетов). Проверять можно NSFW-фильтрами.
— Минимальная сторона (>= 224) и максимальные (4K, <= 3840) у всех изображений в датасете.
— Изображения должны быть проверены по Aspect ratio. Не должно быть изображений 1 к 3 (например, слишком вытянутых, как панорамы).
- Проверка на водяные знаки (Watermark detection). Проверка на соответствие водяных знаков на изображениях и лицензии, указаной в метаданных датасета.
- Проверка качества картинок, отсутствие смазанных картинок, плохо читаемых изображений и тд (blur detection фильтр).

Для приватных датасетов: рекомендуется делать картинку полностью с нуля (нарисовать / сфотографировать / сгенерировать уникальным промптом).


### Критерии соответствия формату датасетов MERA

- Датасет и промпты соответствуют [формату](dataset_formatting.md).
