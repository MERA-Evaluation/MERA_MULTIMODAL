# ruVQA


## Описание задачи

ruVQA — вопросно-ответный публичный датасет на русском языке по изображениям двух типов: фото и картинки. 
Вопросы делятся 1) на простые и 2) сложные, разбитые на самые частотные типы: бинарный, сравнительный, сколько, где, как, какой, что, кто. Для простых вопросов нужно лишь ориентироваться на изображение, для сложных — сделать шаг ризонинга. Все изображения для сета — классические, из публичных источников, реальные фото и мультяшные абстрактные изображения. Датасет публичный, базовый VQA для русского языка.

Тестируемые навыки моделей: Scene understanding, Physical property understanding, Object function understanding, Identity & emotion understanding, Mathematical reasoning, Static counting, Common everyday knowledge, Spatial object relationship, Object-object interaction, Object localization, Object recognition, Living things motion, Object motion, Human body pose recognition


## Мотивация

Датасет решает классическую базовую задачу VQA, по аналогии с английскими датасетами [VQA](https://visualqa.org/download.html). Для русского языка нет в свободном доступе базового VQA сета, как бейзлайна для оценки картиночно-текстовых моделей. Данный датасет рассчитан на проверку базовых способностей моделей различать объекты на изображениях разного типа, понимание вопросов разного типа и генерировать ответ на основе картинки. Вопросы покрывают основные способности: понимание объектов на изображении Fine-grained Perception (Single instance), общее восприятие изображения Coarse perception, здравый смысл, общие знания. Так как картинки взяты из публичных источников (COCO датасет, VQA v2 английский), важно учитывать это при интерпретации оценки. Возможна косвенная утечка данных через картинки в данных обучениях моделей.


## Описание датасета

### Поля данных

Каждый вопрос в датасете содержит следующие поля:

- `instruction` [str] — Промпт-инструкция для модели, содержащая шаблон для вставки элементов вопроса.
- `inputs` — Вводные данные, формирующие задание для модели. Могут включать одну или несколько модальностей - видео, аудио, изображение, текст.
    - `image` [str] — Путь к файлу с изображением, к которому относится вопрос.
    - `question` [str] — Текст вопроса.
- `outputs` [str] — Правильный ответ на вопрос.
- `meta` — Метаданные, относящиеся к тестовому примеру, но не используемые в вопросе (скрытые от тестируемой модели).
    - `id` [int] — Номер-идентификатор вопроса в датасете.
    - `categories` — Категории признаков, характеризующих тестовый пример.
        - `question_type` [str] — типы вопросов: бинарный, сравнительный, сколько, где, как, какой, что, кто;
    - `image` — Метаданные, относящиеся к изображению.
        - `source` [str] — источник изображений: фото из COCO или абстрактная картинка;
    - `complexity` [str] — Сложность вопроса: простая или сложная


### Пример данных

```json
{
    "instruction": "Внимательно посмотрите на картинку <image>.\nОтветьте кратко на вопрос. В качестве ответа напишите слово в той же форме, как спрашивается в вопросе, без дополнительных рассуждений, либо цифру, если ответом является число.\nВопрос:{question}\nОтвет:",
    "inputs": {
        "image": "samples/sample1.jpg",
        "question": "Какого цвета комбинезон девушки?"
    },
    "outputs": "Белого",
    "meta": {
        "id": 123,
        "categories": {
            "question_type": "which"
        },
        "image": {
            "source": "photo"
        },
        "complexity": "simple_question"
    }
}
```


### Промпты

Для задачи были подготовлены 10 промптов, которые были равномерно распределены по вопросам по принципу "один вопрос – один промпт". Шаблоны в фигурных скобках в промпте заполняются из полей внутри поля `inputs` в каждом вопросе.


Пример промпта:

```
Посмотри на изображение <image> и ответь на вопрос по этой картинке. Ответ пиши в той же форме, как спрашивается в вопросе, без дополнительных рассуждений, числа пиши не текстом, а цифрой.

Вопрос:{question}
Ответ:
```


### Создание датасета

Для создания датасета использовались изображения из англоязычного сета VQA v.2 (куда в том числе входят данные из датасета COCO). 
С помощью платформы ABC Elementary аннотаторами были собраны вопросы и ответы к изображениям с нуля. По 3 вопроса на каждую картинку с перекрытием аннотаторов 3.
Полученные результаты агрегировались, и фильтровались как автоматически (отбирались длинные ответы, опечатки, форматирование), так и вручную. Данные бинарных вопросов сбалансированы по классам.


## Оценка


### Метрики

Для агрегированной оценки ответов моделей используются следующие метрики:

- `Exact match`: Метрика Exact match вычисляет среднее по оценкам всех обработанных вопросов, где оценка имеет значение 1, если предсказанная строка точно совпадает с правильным ответом, и 0 в остальных случаях.
